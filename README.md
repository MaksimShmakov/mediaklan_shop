# Медиаклан Маркет

Минималистичный магазин на FastAPI для выдачи товаров за баллы.

## Быстрый старт

1. Скопируйте пример окружения:

```bash
cp .env.example .env
```

2. Задайте в `.env` секреты, пароль администратора и доступы к Postgres.
3. Запустите:

```bash
docker compose up --build
```

Откройте `http://localhost:8000`.

## Как пользоваться

- Вход пользователей: `/login`.
- Админ-панель: `/admin/login`.
- В админ-панели настраиваются:
  - окна работы магазинов,
  - allowlist для обычного/премиум магазина,
  - баллы пользователей,
  - товары и варианты (номиналы).

## Уведомления в Telegram

1. Создайте бота через `@BotFather` и получите токен.
2. Добавьте бота в нужную группу и дайте право отправлять сообщения.
3. Напишите любое сообщение в группу.
4. Получите `chat_id` группы:
   - через `https://api.telegram.org/bot<ТОКЕН>/getUpdates`, или
   - через бота `@getidsbot`.
5. Заполните в `.env`:

```
TG_BOT_TOKEN=...
TG_GROUP_CHAT_ID=-1001234567890
```

## Примечания

- `tg_username` приводится к нижнему регистру и сохраняется с `@`.
- Баллы и заказы хранятся в PostgreSQL (контейнер `db`).
- Сток `пусто` = безлимитный.
